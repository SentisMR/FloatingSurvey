___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.

___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Sentis Floating Survey",
  "categories": [
    "SURVEY"
  ],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "Sentis Research Floating Survey",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "GROUP",
    "name": "Survey",
    "displayName": "Survey",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "TEXT",
        "name": "surveyID",
        "displayName": "Survey ID",
        "simpleValueType": true,
        "help": "This value is supplied by Sentis Research and represents the Survey we would like to show",
        "valueValidators": [
          {
            "type": "NUMBER"
          },
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "surveyURL",
        "displayName": "Survey URL",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          },
          {
            "type": "REGEX",
            "args": [
              "^(https:\\/\\/).*"
            ],
            "errorMessage": "URL must start with https://"
          }
        ],
        "help": "This value is supplied by Sentis Research and represents server where the survey is hosted"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "Config",
    "displayName": "Config",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "TEXT",
        "name": "title",
        "displayName": "Title",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "launcher",
        "displayName": "Call-to-action text",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "completed",
        "displayName": "Completed Text",
        "simpleValueType": true,
        "help": "Call to action text upon survey complete",
        "defaultValue": "Thank You!"
      },
      {
        "type": "TEXT",
        "name": "backgroundColor",
        "displayName": "Floating Window Colour",
        "help": "Specify a custom background colour for the floating window. Note: Does not apply to the survey template inside IFrame",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "fontFamily",
        "displayName": "Floating Window Font Family",
        "help": "Specify a custom font for the floating window. Note: Does not apply to the survey template inside IFrame",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "assetURL",
        "displayName": "Asset URL",
        "simpleValueType": true,
        "defaultValue": "https://d1mxil5lo6vg2v.cloudfront.net/img/",
        "help": "The URL Path to where the floating survey icons are stored. Defaults to the Sentis CDN",
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^(https:\\/\\/).*"
            ],
            "errorMessage": "URL must start with https://"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "resetTimer",
        "displayName": "Reset Timer",
        "help": "Specify a time in minutes to re-prompt a survey if already completed or dismissed.",
        "valueValidators": [
          {
            "type": "POSITIVE_NUMBER"
          }
        ]
      },
      {
        "type": "RADIO",
        "name": "animateLauncher",
        "displayName": "Enable Call-to-action Animation",
        "radioItems": [
          {
            "value": 1,
            "displayValue": "Yes"
          },
          {
            "value": 0,
            "displayValue": "No"
          }
        ],
        "simpleValueType": true,
        "defaultValue": 1
      },
      {
        "type": "RADIO",
        "name": "branded",
        "displayName": "Display Sentis Branding",
        "radioItems": [
          {
            "value": 1,
            "displayValue": "Yes"
          },
          {
            "value": 0,
            "displayValue": "No"
          }
        ],
        "simpleValueType": true,
        "defaultValue": 1
      },
      {
        "type": "RADIO",
        "name": "demo",
        "displayName": "Enable Demo Mode",
        "radioItems": [
          {
            "value": 1,
            "displayValue": "Yes"
          },
          {
            "value": 0,
            "displayValue": "No"
          }
        ],
        "simpleValueType": true,
        "defaultValue": 0
      },
	        {
        "type": "SELECT",
        "name": "position",
        "displayName": "Position",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "left",
            "displayValue": "Left"
          },
          {
            "value": "right",
            "displayValue": "Right"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "right"
      },
	  {
        "type": "TEXT",
        "name": "width",
        "displayName": "Set width of floating survey container",
        "simpleValueType": true,
        "alwaysInSummary": true,
        "defaultValue": 370,
        "valueValidators": [
          {
            "type": "POSITIVE_NUMBER"
          },
          {
            "type": "REGEX",
            "args": [
              "^([3-8][0-9][0-9]|600)$"
            ]
          }
        ]
      },
	  {
        "type": "TEXT",
        "name": "closeIconColor",
        "displayName": "Set close icon color",
        "simpleValueType": true,
        "alwaysInSummary": true,
        "defaultValue": "#FFFFFF",
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^#(?:[0-9a-fA-F]{3}){1,2}$"
            ]
          }
        ]
      },
	  {
        "type": "TEXT",
        "name": "surveyIconColor",
        "displayName": "Set survey icon background color",
        "simpleValueType": true,
        "alwaysInSummary": true,
        "defaultValue": "#4188C5",
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^#(?:[0-9a-fA-F]{3}){1,2}$"
            ]
          }
        ]
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "Admin",
    "displayName": "Admin",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "TEXT",
        "name": "jsURL",
        "displayName": "JS URL",
        "simpleValueType": true,
        "defaultValue": "https://d1mxil5lo6vg2v.cloudfront.net/fls.js",
        "help": "The fully qualified domain name and path to the Floating Survey JavaScript file. Defaults to the Sentis CDN. If self hosting, the domain and file must be added to the Google Tag Templates \"Injects Scripts\" permissions.",
        "notSetText": "This value is required. Please specify your self hosted file URI or set to the default Sentis CDN.",
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^(https:\\/\\/).*"
            ],
            "errorMessage": "URL must start with https://"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "cssURL",
        "displayName": "CSS Url",
        "simpleValueType": true,
        "defaultValue": "https://d1mxil5lo6vg2v.cloudfront.net/fls.css",
        "help": "The fully qualified domain name and path to the Floating Survey css file. Defaults to the Sentis CDN. The CSS must be paired with the JS from the same build. If you are unsure about this value, please reach out to your contact at Sentis Research. If self hosting, this file was provided.",
        "notSetText": "This value is required. Please specify your self hosted file URI or set to the default Sentis CDN.",
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^(https:\\/\\/).*"
            ],
            "errorMessage": "URL must start with https://"
          }
        ]
      },
      {
        "type": "RADIO",
        "name": "debug",
        "displayName": "Debug",
        "radioItems": [
          {
            "value": 1,
            "displayValue": "Yes"
          },
          {
            "value": 0,
            "displayValue": "No"
          }
        ],
        "simpleValueType": true,
        "help": "Enable GTM console logs for template",
        "defaultValue": 0
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

//import required GTM libraries
const logToConsole = require('logToConsole');
const injectScript = require('injectScript');
const queryPermission = require('queryPermission');
const callInWindow = require('callInWindow');
const log = data.debug ? logToConsole : (() => {});


//check and set our floating window style options
const floatingStyles = { window: {}, launcher: {}};
const styleFields = ['backgroundColor', 'fontFamily'];

for(var i = 0; i < styleFields.length; i++) {
  const property = styleFields[i];
  if(data.hasOwnProperty(property) && data[property].length) {
     floatingStyles.window[property] = data[property];
     floatingStyles.launcher[property] = data[property];
  }
}

const onSuccess = () => {  
  log('GTM - FLS: Loading FLS');  
  callInWindow('renderFloatingSurvey', {
        surveyID: data.surveyID,
        surveyURL: data.surveyURL,
    	cssURL: data.cssURL,
        launcher: data.launcher,
        animateLauncher: data.animateLauncher,
        branded: data.branded,
        assetURL: data.assetURL,
        resetTimer: data.resetTimer || null,
        demo: data.demo,
        styles: floatingStyles,
        title: data.title,
        completed: data.completed,
        width: data.width,
		position: data.position,
        closeIconColor: data.closeIconColor,
        surveyIconColor: data.surveyIconColor
  });
};

const onFailure = () => {
  log('GTM - FLS: Failed to load script');   
  data.gtmOnFailure();
};

if (queryPermission('inject_script', data.jsURL)) {
  log('GTM - FLS: Importing script from ' + data.jsURL);
  injectScript(data.jsURL, onSuccess, onFailure); 
  data.gtmOnSuccess();
} else {
  log('GTM - FLS: Script load failed due to permissions mismatch for:' + data.jsURL);
  data.gtmOnFailure();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://d1mxil5lo6vg2v.cloudfront.net/fls.js"
              },
              {
                "type": 1,
                "string": "https://d2xutekxqfasu2.cloudfront.net/fls.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "renderFloatingSurvey"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Test Deployment
  code: |-
    const mockData = {
      surveyID: 12345,
      surveyURL: 'https://surveydomain.com',
      launcher: 'Rate our site!',
      title: 'What do you think?',
      completed: 'Thank you for your feedback!',
      debug: true,
      jsURL: 'https://d2xutekxqfasu2.cloudfront.net/fls.js'
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();


___NOTES___

Created on 5/15/2020, 11:43:53 AM


